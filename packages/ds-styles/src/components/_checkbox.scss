@use '../tokens' as tokens;

// ===================
// Checkbox Root (label wrapper)
// ===================

.checkbox-root {
  display: inline-flex;
  align-items: center;
  gap: tokens.$spacing-2;
  cursor: pointer;
  user-select: none;

  &[data-disabled] {
    cursor: not-allowed;
    opacity: 0.5;
  }

  // Hover effect on indicator
  &:hover:not([data-disabled]) {
    .checkbox-indicator[data-state='unchecked'] {
      border-color: tokens.$border-hover;
    }
  }
}

// ===================
// Checkbox Indicator (visual box)
// ===================

.checkbox-indicator {
  // Base styles
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: tokens.$radius-4;
  background-color: tokens.$background;
  border: 1px solid tokens.$border;
  transition:
    background-color tokens.$transition-fast,
    border-color tokens.$transition-fast,
    box-shadow tokens.$transition-fast;

  // ===================
  // Sizes
  // ===================
  &[data-size='sm'] {
    width: 16px;
    height: 16px;

    &::after {
      width: 8px;
      height: 8px;
    }
  }

  &[data-size='md'] {
    width: 20px;
    height: 20px;

    &::after {
      width: 10px;
      height: 10px;
    }
  }

  &[data-size='lg'] {
    width: 24px;
    height: 24px;

    &::after {
      width: 12px;
      height: 12px;
    }
  }

  // ===================
  // States
  // ===================

  // Unchecked state
  &[data-state='unchecked'] {
    background-color: tokens.$background;
    border-color: tokens.$border;
  }

  // Checked state
  &[data-state='checked'] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;

    // Checkmark icon (CSS)
    &::after {
      content: '';
      display: block;
      border: solid tokens.$text-inverse;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg) translate(-1px, -1px);
      width: 5px;
      height: 9px;
    }

    &[data-size='sm']::after {
      width: 4px;
      height: 7px;
      border-width: 0 1.5px 1.5px 0;
    }

    &[data-size='lg']::after {
      width: 6px;
      height: 11px;
      border-width: 0 2.5px 2.5px 0;
    }
  }

  // Indeterminate state
  &[data-state='indeterminate'] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;

    // Minus icon (CSS)
    &::after {
      content: '';
      display: block;
      background-color: tokens.$text-inverse;
      border-radius: 1px;
      height: 2px;
    }

    &[data-size='sm']::after {
      width: 8px;
    }

    &[data-size='md']::after {
      width: 10px;
    }

    &[data-size='lg']::after {
      width: 12px;
    }
  }

  // Disabled state
  &[data-state='disabled'] {
    background-color: tokens.$background-muted;
    border-color: tokens.$border;
  }

  // Focus ring (when parent is focused)
  .checkbox-root:focus-within & {
    outline: none;
    box-shadow: 0 0 0 2px #{tokens.$primary-alpha-20};
  }
}

// ===================
// Checkbox Label
// ===================

.checkbox-label {
  font-size: tokens.$font-size-14;
  line-height: tokens.$line-height-normal;
  color: tokens.$text;

  &[data-disabled] {
    color: tokens.$text-muted;
  }
}

// ===================
// Legacy .checkbox class (backwards compatibility)
// ===================

.checkbox {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: tokens.$radius-4;
  background-color: tokens.$background;
  border: 1px solid tokens.$border;
  cursor: pointer;
  transition:
    background-color tokens.$transition-fast,
    border-color tokens.$transition-fast;

  &[data-size='sm'] {
    width: 16px;
    height: 16px;
  }

  &[data-size='md'] {
    width: 20px;
    height: 20px;
  }

  &[data-size='lg'] {
    width: 24px;
    height: 24px;
  }

  &[data-state='checked'] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;
  }

  &[data-state='indeterminate'] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;
  }

  &[data-state='disabled'] {
    cursor: not-allowed;
    opacity: 0.5;
    background-color: tokens.$background-muted;
  }
}
